icon: https://apps.okteto.com/movies/icon.png

build:
  api:
    context: api

deploy:
  divert:
    namespace: ${OKTETO_SHARED_NAMESPACE}
  commands:
  - name: Deploy API
    command: helm upgrade --install api api/chart --set image=${OKTETO_BUILD_API_IMAGE}

dev:
  api:
    image: okteto/golang:1.24
    workdir: /usr/src/app
    command: bash
    securityContext:
      capabilities:
        add:
        - SYS_PTRACE
    sync:
      - api:/usr/src/app
    forward:
      - 2346:2345